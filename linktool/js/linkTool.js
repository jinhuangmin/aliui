$(document).ready(function(){function h(){$("#qrcode").html("");$("#qrcode").qrcode({width:k,height:k,text:q(d),typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"})}function q(c){var b;var a="";var d=c.length;for(b=0;b<d;b++){var e=c.charCodeAt(b);1<=e&&127>=e?a+=c.charAt(b):(2047<e?(a+=String.fromCharCode(224|e>>12&15),a+=String.fromCharCode(128|e>>6&63)):a+=String.fromCharCode(192|e>>6&31),a+=String.fromCharCode(128|e>>0&63))}return a}var c,l="0",m="0",n="0",p="0",d="https://m.alibaba.com/",
k=150;h();$("#getlink").click(function(){var f=c=$("#pclink").val(),b=f.indexOf(".en."),a=f.indexOf("/productgrouplist"),g=f.indexOf(".m.en."),e=f.indexOf("/product/"),k=f.indexOf("alibaba.");f=f.indexOf("product-detail");-1<g?-1<a?m="1":(alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8def\u5f84"),m="0"):-1<b?(l="1",m=-1<a?"1":"0",n=-1<e?"1":"0"):-1>=b&&-1<k&&-1<f?p=l="1":(l="0",alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8def\u5f84"));"1"==l?("1"==n?(a=c.indexOf("-"),b=c.substring(0,a),a=c.substring(a+
1,c.length),g=a.indexOf("/"),a=a.substring(g,a.length),c=b+a,a=c.indexOf(".en."),a=c.substring(a+4,c.length),d="https://m."+a,$("#wxlink").val(d),$("#mobileview").attr("src",d),h(),n="0"):(d=c.replace(".en.",".m.en."),"1"==p&&(b=c.indexOf("alibaba."),b=c.substring(b,c.length),g=b.lastIndexOf(".html"),a=b.substring(0,g),e=a.lastIndexOf("_"),g=a.substring(e+1,g),console.log(a),b=b.replace("/product-detail/","/product/"+g+"/"),d="https://m."+b,p="0"),$("#wxlink").val(d),$("#mobileview").attr("src",d),
h()),l="0"):"1"==m&&($("#wxlink").val(d),$("#mobileview").attr("src",d),h(),m="0")});$("#codeSize").change(function(){k=$(this).val();h()})});